<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://brl-cad.github.io/wiki/user/Vladbogolin/GSoC2013/Logs/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Daily Progress - BRL-CAD Wiki</title>
        <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../..">BRL-CAD Wiki</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../../DocPages/" class="nav-link">DocPages</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../../UserPages/" class="nav-link">UserPages</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/BRL-CAD/wiki/blob/main/pages/user/Vladbogolin/GSoC2013/Logs.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#daily-progress" class="nav-link">Daily Progress</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#project-info" class="nav-link">Project Info</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#milestones" class="nav-link">Milestones</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#logs" class="nav-link">Logs</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#community-bonding" class="nav-link">Community bonding</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-1-17-june-23-june" class="nav-link">Week 1 (17 June - 23 June)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-2-25-june-30-june" class="nav-link">Week 2 (25 June - 30 June)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-3-1-july-7-july" class="nav-link">Week 3 (1 July - 7 July)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-4-8-july-14-july" class="nav-link">Week 4 (8 July - 14 July)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-5-15-july-21-july" class="nav-link">Week 5 (15 July - 21 July)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-6-22-july-28-july" class="nav-link">Week 6 (22 July - 28 July)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-7-29-july-4-august" class="nav-link">Week 7 (29 July - 4 August)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-8-5-august-11-august" class="nav-link">Week 8 (5 August - 11 August)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-9-12-august-19-august" class="nav-link">Week 9 (12 August - 19 August)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-10-19-august-25-august" class="nav-link">Week 10 (19 August - 25 August)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-11-26-august-1-september" class="nav-link">Week 11 (26 August - 1 September)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-12-2-september-8-september" class="nav-link">Week 12 (2 September - 8 September)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-13-9-september-15-september" class="nav-link">Week 13 (9 September - 15 September)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-14-16-september-22-september" class="nav-link">Week 14 (16 September - 22 September)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#week-15" class="nav-link">Week 15</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#project-summary" class="nav-link">Project summary</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="daily-progress">Daily Progress</h1>
<h1 id="project-info">Project Info</h1>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Project Name</strong></td>
<td>New Cross-Platform 3D Display Manager</td>
</tr>
<tr>
<td><strong>Student Name</strong></td>
<td>Bogolin Simion Vlad</td>
</tr>
<tr>
<td><strong>IRC nick</strong></td>
<td>vladbogo</td>
</tr>
<tr>
<td><strong>Link to proposal</strong></td>
<td><a href="../../Proposal/DisplayManager/">proposal</a></td>
</tr>
</tbody>
</table>
<h1 id="milestones">Milestones</h1>
<ul>
<li>Embed Qt in Tk windows</li>
<li>Drawing<ul>
<li>Line drawing</li>
<li>Text drawing</li>
</ul>
</li>
<li>Keyboard and mouse integration</li>
<li>Embedding a framebuffer window</li>
</ul>
<h1 id="logs">Logs</h1>
<h2 id="community-bonding">Community bonding</h2>
<ul>
<li>30 May 2013:<ul>
<li>Updated short description of the project on the melange page.</li>
</ul>
</li>
<li>1 June 2013:<ul>
<li>A first step in implementing the qt display manager. Now it only
    prints logs similar to txt dm, but has some improvements</li>
</ul>
</li>
<li>4 June 2013:<ul>
<li>Final version of Qt dm patch</li>
<li><a href="http://sourceforge.net/p/brlcad/patches/185/">http://sourceforge.net/p/brlcad/patches/185/</a></li>
</ul>
</li>
<li>14 June 2013:<ul>
<li>Added to g-voxel (src/conv/g-voxel.c) program the same optional
    arguments as the src/libged/voxelize.c (-s -t and -d).</li>
<li><a href="http://sourceforge.net/p/brlcad/patches/189/">http://sourceforge.net/p/brlcad/patches/189/</a></li>
</ul>
</li>
</ul>
<h2 id="week-1-17-june-23-june">Week 1 (17 June - 23 June)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>As I haven't worked with Qt before I will focus on getting more
    familiarized with it this week and also a more detailed look on
    the existing dm's code to be sure I will not miss anything.</li>
</ul>
</li>
<li>17 June 2013:<ul>
<li>Created a first qt small application. It is not something
    complicated. I focused on the compilation procedure and how to
    integrate qt with cmake.</li>
</ul>
</li>
<li>18 June 2013:<ul>
<li>I successfully built a qt project using cmake. I struggled with
    the difference between Qt4 and Qt5 but finally managed to make a
    cmake build.</li>
</ul>
</li>
<li>19 June 2013:<ul>
<li>Got commit access</li>
<li>Updated the txt display manager patch<ul>
<li><a href="https://sourceforge.net/p/brlcad/patches/163/">https://sourceforge.net/p/brlcad/patches/163/</a></li>
</ul>
</li>
</ul>
</li>
<li>20 June 2013:<ul>
<li>Studied existing cmake files in order to complete integration of
    Qt with cmake.</li>
<li>Found out a FindQt.cmake implementation and tested it: does not
    work.</li>
</ul>
</li>
<li>21 June 2013:<ul>
<li>Studied existing X-dm implementation, especially the open
    function.</li>
</ul>
</li>
<li>22 June 2013:<ul>
<li>A short break so I didn't do much today but I've looked on the
    mged dm files (mged/dm-ogl.c).</li>
</ul>
</li>
<li>23 June 2013:<ul>
<li>Studied some more detailed Qt projects that involve basic
    drawing.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Overall it was a good week in which I think I've managed to
    accomplish the weekly milestone. I still have to clear out some
    things but I'm confident I can start implementing effectively.</li>
</ul>
</li>
</ul>
<h2 id="week-2-25-june-30-june">Week 2 (25 June - 30 June)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Start implementing effectively and make progress in embedding Qt
    in Tk window.</li>
</ul>
</li>
<li>24 June 2013:<ul>
<li>Committed the qt display manager patch. It only prints logs now.</li>
<li>Additional test to set BRLCAD_ENABLE_QT. Still needs to be
    improved because at the moment the path to Qt installation
    should be provided in the CMAKE_PREFIX_PATH.</li>
</ul>
</li>
<li>25 June 2013:<ul>
<li>Integrated Qt in BRL-CAD's cmake build and created a small
    application to test the integration. Still needs to quiet
    warnings from Qt files.</li>
</ul>
</li>
<li>26 June 2013:<ul>
<li>A break day so I did not do much work.</li>
</ul>
</li>
<li>27 June 2013:<ul>
<li>IRC discussion regarding various problems: framebuffer to be
    used by the new display manager (i will start with a null/text
    framebuffer), fPIC flag</li>
<li>Committed changes to complete Qt integration in cmake build and
    found a suitable solution for the position independent code flag
    at least for the moment (cmake version 2.8.11)</li>
<li>Almost everything ready so tomorrow I will start working
    effectively to embed Qt in Tk window</li>
</ul>
</li>
<li>28 June 2013:<ul>
<li>Found different ways to quiet warnings from Qt files.</li>
<li>Read Qt documentation and studied some basic drawing
    applications.</li>
</ul>
</li>
<li>29 June 2013:<ul>
<li>Started working on actual embedding.</li>
<li>Small steps in order to create the Tk main window.</li>
<li>Go back to Bucharest (and hopefully this will solve the internet
    connection problem which was a little bad here) so today is a
    busy day.</li>
</ul>
</li>
<li>30 June 2013:<ul>
<li>Dealt with generic Tk window problems such as window type
    (top-level or embedded), creating a display, window dimension.</li>
<li>Almost finished the logic behind the Tk window so that Qt can be
    successfully embedded in it.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>A lot of things that were needed to be clarified are now clear,
    especially after the IRC discussion.</li>
<li>Tk main window is almost created so I have made some progress in
    the actual implementation.</li>
<li>Still the cmake integration took more that I've expected so I
    can't say I've made all things I had in mind for this week but
    this is nothing to be worried about because I am on schedule.</li>
</ul>
</li>
</ul>
<h2 id="week-3-1-july-7-july">Week 3 (1 July - 7 July)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Finish embedding Qt in Tk window.</li>
</ul>
</li>
<li>1 July 2013:<ul>
<li>Finished creating Tk main window: now it's displays an empty
    window.</li>
<li>Struggled with a segfault due to doevent(mged/doevent.c)
    function: solved this by adding an qt_doevent(mged/dm-qt.c)
    function which does nothing for the moment.</li>
</ul>
</li>
<li>2 July 2013:<ul>
<li>Studied QPixmap examples.</li>
</ul>
</li>
<li>3 July 2013:<ul>
<li>Review existing dm X implementation and focus on pixmap
    creation.</li>
</ul>
</li>
<li>4 July 2013:<ul>
<li>After updating to the latest sources Tcl_Eval from dm_open
    failed. Solved it by recompiling the whole code again.</li>
<li>Read about QApplication in detail because when I tried to create
    some Qt widgets I got a runtime error saying that QApplication
    is required.</li>
<li>Looked on the drawBegin function to see how drawing is dealt
    with in the current implementation.</li>
<li>Ignored the float-equal warning for libdm so that the code
    compiles with strict compilation on.</li>
</ul>
</li>
<li>5 July 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>6 July 2013:<ul>
<li>Studied an existing Qt and Tk integration.</li>
</ul>
</li>
<li>7 July 2013:<ul>
<li>Struggled with showing a Qt window using processEvents function.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Quite a busy week with a lot of unexpected problems so I am a
    little bit behind my original schedule but I am confident I will
    make up for the lost time next week.</li>
<li>I had some discussions with my mentor during the past days and
    decided to leave the Tk part as small as possible (preferably
    just Qt to be used in the display window)</li>
</ul>
</li>
</ul>
<h2 id="week-4-8-july-14-july">Week 4 (8 July - 14 July)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Draw lines in the new display manager.</li>
</ul>
</li>
<li>8 July 2013:<ul>
<li>Finally solved the display of the Qt window (processEvents must
    be called during refresh)</li>
</ul>
</li>
<li>9 July 2013:<ul>
<li>Studied the mged main loop and refresh procedure to see how
    could Qt be integrated with.</li>
</ul>
</li>
<li>10 July 2013:<ul>
<li>Searched for different ways to integrate Tk and Qt main loop
    event.</li>
<li>Found Xt and Qt integration and studied the implementation.</li>
</ul>
</li>
<li>11 July 2013:<ul>
<li>Tried to make the Qt and Tk integration using the
    QWidget::create function.</li>
<li>Unfortunately this does not work either but at least the
    solution compiles unlike the previous tries.</li>
</ul>
</li>
<li>12 July 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>13 July 2013:<ul>
<li>Read about X11 Qt event integration so that I could try a
    similar approach with Tk.</li>
</ul>
</li>
<li>14 July 2013:<ul>
<li>Committed changes to illustrate the Qt and Tk integration.</li>
<li>Implemented qt-close function so that the display manager is
    gracefully released.</li>
<li>IRC discussion regarding Qt and Tk integration.</li>
<li>Tested the QWidget::create function also on raw X11 windows.</li>
<li>Studied some drawing line examples.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Unfortunately the embedding still does not work so in the worst
    case I will go on another path: not use Tk and create just a Qt
    window.</li>
<li>Drawing lines shouldn't be a problem so that after the windows
    are created it should not be a big task.</li>
</ul>
</li>
</ul>
<h2 id="week-5-15-july-21-july">Week 5 (15 July - 21 July)</h2>
<ul>
<li><strong>Weekly milestones</strong>:<ul>
<li>Solve the embedding problem.</li>
<li>Finish the drawing line functionality.</li>
<li>Start implementing the draw string functionality.</li>
</ul>
</li>
<li>15 July 2013:<ul>
<li>Implemented the qt_reshape function.</li>
<li>Partially implemented the qt_configureWin function.</li>
<li>Set the window background color.</li>
<li>Added the processEvents callback to struct dm so that the
    QApplication::processEvents could be called in the mged's main
    event loop.</li>
</ul>
</li>
<li>16 July 2013:<ul>
<li>I have tried again to embed Qt in an X11 window and posted a
    stackoverflow question regarding the procedure:<ul>
<li><a href="http://stackoverflow.com/questions/17686315/qwidget-in-x11-window">http://stackoverflow.com/questions/17686315/qwidget-in-x11-window</a></li>
</ul>
</li>
<li>Also the link to yesterday questions regarding Qt and Tk:<ul>
<li><a href="http://stackoverflow.com/questions/17648421/how-to-create-a-qwidget-with-a-tk-window-as-parent">http://stackoverflow.com/questions/17648421/how-to-create-a-qwidget-with-a-tk-window-as-parent</a></li>
<li><a href="http://qt-project.org/forums/viewthread/29996/">http://qt-project.org/forums/viewthread/29996/</a></li>
</ul>
</li>
<li>I hope to get an answer soon otherwise I will take in
    consideration ignoring Tk.</li>
</ul>
</li>
<li>17 July 2013:<ul>
<li>Almost finished implementing the drawLine2d functionality.</li>
<li>Implemented the qt_setBGcolor function.</li>
<li>Tried to build on windows but unsuccessful.</li>
</ul>
</li>
<li>18 July 2013:<ul>
<li>Finished a first implementation for drawLine2d. Still needs to
    be a little bit cleaned and drawBegin and drawEnd should be used
    which is scheduled for tomorrow.</li>
<li>Read more about Qt events and started to take in consideration
    ignoring Tk (search for what and where should be changed)</li>
</ul>
</li>
<li>19 July 2013:<ul>
<li>Implemented the qt_setFGColor function.</li>
<li>Implemented the qt_drawBegin and qt_drawEnd and modified the
    logic so that the QPainter is created in drawBegin and destroyed
    in drawEnd</li>
<li>Implemented the qt_drawString2D function and the
    qt_drawPoint2D function.</li>
<li>Tested embedding Qt in Tk using XReparentWindow even though it
    wouldn't be a cross platform solution. The test was unsuccessful
    but there still are some things that I need do read about so I
    will continue the test tomorrow.</li>
</ul>
</li>
<li>20 July 2013:<ul>
<li>Documented more on the approach from yesterday: I try to use the
    XReparentWindow to embed Qt in Tk because being both (on Linux)
    X11 windows this should be possible but still unsuccessful.</li>
<li>Some fixes in src/proc-db/cchannel.h applied in r56161 and
    r56163.</li>
<li>Reviewed patches 212 and 213:<ul>
<li><a href="https://sourceforge.net/p/brlcad/patches/212/">https://sourceforge.net/p/brlcad/patches/212/</a></li>
<li><a href="https://sourceforge.net/p/brlcad/patches/213/">https://sourceforge.net/p/brlcad/patches/213/</a></li>
</ul>
</li>
</ul>
</li>
<li>21 July 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>A good week and at the end of it I have implemented the draw
    string functionality and the draw line 2d.</li>
<li>I also asked various questions regarding the embedding but
    received no answer until now.</li>
<li>Results:</li>
</ul>
</li>
</ul>
<p><img alt="" src="/wiki/user/img/Snapshot2.png" />
<img alt="" src="/wiki/user/img/Snapshot3.png" /></p>
<h2 id="week-6-22-july-28-july">Week 6 (22 July - 28 July)</h2>
<ul>
<li><strong>Weekly milestones</strong>:<ul>
<li>Implement the draw 3d line functionality</li>
<li>Decide on the embedding problem</li>
<li>Prepare the midterm evaluation</li>
</ul>
</li>
<li>22 July 2013:<ul>
<li>Couldn't get to a result from the last week's approach on the
    embedding (using XReparentWindow funtion)</li>
<li>Studied some 3d drawing examples in Qt</li>
</ul>
</li>
<li>23 July 2013:<ul>
<li>Read more about 3d drawing in Qt</li>
<li>Tried to resize the window but until the embedding it's not
    solved the callbacks are not called on resize event.</li>
<li>Tried to find a way to solve the lnk1104 error on windows: tried
    to make cmake add quotes to libraries dependencies path.</li>
</ul>
</li>
<li>24 July 2013:<ul>
<li>Modified font size for string drawing according to the size of
    the window.</li>
<li>Discussion with my mentor regarding the embedding problem.
    Received some suggestions and tested them but still no luck.</li>
<li>Sometimes I get a SEGFAULT when closing the dm so I investigated
    the problem using gdb and valgrind but when I tested the error
    did not occurred.</li>
</ul>
</li>
<li>25 July 2013:<ul>
<li>Solved the embedding problem: there still are some things that
    need to be done better but Qt is displayed in the Tk window. I
    will make the necessary changes so that everything works as
    expected in the next days.</li>
<li>I want to thank D.Rossberg for his help and support in finding
    the solution :).</li>
</ul>
</li>
<li>26 July 2013:<ul>
<li>Result:<img alt="" src="/wiki/user/img/Tkqt.png" /><img alt="" src="/wiki/user/img/Tkqt1.png" /><ul>
<li>The window's content is the same like in the first pictures
    posted but this time Qt content is shown within a Tk window
    :).</li>
<li>As seen in picture one the Qt and the Tk windows have
    different size (the bottom text does not appear) so when
    resizing the Tk window the Qt one does not automatically
    changes zie. I'll work to fix this behaviour and hope to be
    fixed by tomorrow.</li>
</ul>
</li>
<li>Made some sanity checks and fixed some small issues.</li>
</ul>
</li>
<li>27 July 2013:<ul>
<li>Solved the resize problem: the Qt window now gets resized when
    the Tk one changes size.</li>
</ul>
</li>
<li>28 July 2013:<ul>
<li>Studied existing dm_drawVList implementation.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Good week in which the embedding problem was solved.</li>
</ul>
</li>
</ul>
<h2 id="week-7-29-july-4-august">Week 7 (29 July - 4 August)</h2>
<ul>
<li><strong>Weekly milestones</strong>:<ul>
<li>Finish drawing.</li>
<li>Start working at mouse integration.</li>
</ul>
</li>
<li>29 July 2013:<ul>
<li>Submitted the evaluation form on melange.</li>
<li>A little break</li>
</ul>
</li>
<li>30 July 2013:<ul>
<li>Implemented the qt_loadMatrix, qt_setWinBounds and
    qt_drawVList function.</li>
<li>The display manager is able to display more complex objects:</li>
</ul>
</li>
</ul>
<p><img alt="" src="/wiki/user/img/Sph.png" />
<img alt="" src="/wiki/user/img/Tor.png" /></p>
<ul>
<li>31 July 2013:<ul>
<li>Struggled with mouse integration.</li>
<li>The problem is that Qt receives the events but the Tk window
    does not so I tried to make Qt pass the events to Tk but I have
    been unsuccessful for the moment.</li>
</ul>
</li>
<li>1 August 2013:<ul>
<li>Continued to find a way to send Tk events from Qt. Still I was
    unsuccessful.</li>
</ul>
</li>
<li>2 August 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>3 August 2013:<ul>
<li>Tried sending events using the XSendEvent function but there
    still are things that I need to figure out.</li>
</ul>
</li>
<li>4 August 2013:<ul>
<li>Managed to send events to the Tk window using Tcl_Eval
    function. I still have a problem because the events are not
    processed when they are sent but they are processed later.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>At the end of this week more complex objects can be drawn in the
    qt window.</li>
<li>Also I have made progress in integrating the mouse between Qt
    and Tk.</li>
</ul>
</li>
</ul>
<h2 id="week-8-5-august-11-august">Week 8 (5 August - 11 August)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Finish the keyboard and mouse integration</li>
</ul>
</li>
<li>5 August:<ul>
<li>Struggled with locale settings and after an IRC discussion found
    a solution.</li>
<li>Committed the changes I've made during the last days regarding
    mouse integration.</li>
<li>Almost finished the mouse integration: the content resizes when
    pressing mouse buttons:</li>
</ul>
</li>
</ul>
<p><img alt="" src="/wiki/user/img/Tor1.png" /><img alt="" src="/wiki/user/img/Tor2.png" /></p>
<ul>
<li>6 August 2013:<ul>
<li>Dealt with Control+LeftMouseButton binding: I successfully
    managed to rotate the object but I still have some problems
    because since it starts rotating it never stops:</li>
</ul>
</li>
</ul>
<p><img alt="" src="/wiki/user/img/Rotate1.png" /><img alt="" src="/wiki/user/img/Rotate2.png" /></p>
<ul>
<li>7 August 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>8 August 2013:<ul>
<li>Solved the rotation problem</li>
<li>Read about keyboard events</li>
</ul>
</li>
<li>9 August 2013:<ul>
<li>Integrated keyboard events:</li>
</ul>
</li>
</ul>
<p><img alt="" src="/wiki/user/img/Keyboard.png" /><img alt="" src="/wiki/user/img/Keyboard2.png" /></p>
<ul>
<li>10 August 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>11 August 2013:<ul>
<li>Searched for a more generic way of dealing with events. I've got
    a couple of ideas that will ease adding new key bindings to the
    display manager.</li>
<li>Did some more testing to see if everything behaves as expected.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Good week in which I've almost finished dealing with keyboard
    and mouse integration.</li>
<li>As I am a bit ahead of schedule I'll focus on testing in the
    next couple of days.</li>
</ul>
</li>
</ul>
<h2 id="week-9-12-august-19-august">Week 9 (12 August - 19 August)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Finish the keyboard and mouse integration</li>
</ul>
</li>
<li>12 August 2013:<ul>
<li>Some more testing: found a problem when pressing control+mouse
    button: at the first move the object jumps in a new position
    then moves as expected.</li>
</ul>
</li>
<li>13 August 2013:<ul>
<li>Studied archer code to see how the new display manager can be
    integrated.</li>
</ul>
</li>
<li>14 August 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>15 August 2013:<ul>
<li>Continued to see how archer works and how can I integrate the
    new display manager.</li>
</ul>
</li>
<li>16 August 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>17 August 2013:<ul>
<li>Break day</li>
<li>I had a small holiday and from tomorrow I'll get back to work.</li>
</ul>
</li>
<li>18 August 2013:<ul>
<li>Back to work so I continued searching for a way to integrate the
    new display manager in archer.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>The display manager is taking shape after the mouse and the
    keyboard integration are complete.</li>
</ul>
</li>
</ul>
<h2 id="week-10-19-august-25-august">Week 10 (19 August - 25 August)</h2>
<ul>
<li><strong>Weekly milestones</strong>:<ul>
<li>Test the display manager</li>
<li>Solve any issues that might appear</li>
<li>Research embedding a framebuffer window functionality</li>
</ul>
</li>
<li>19 August 2013:<ul>
<li>Found a issue regarding starting the display manager without a
    database: the background colour is not set.</li>
<li>Added the option to select the Qt display manager from
    Modes&gt;Display Manager in mged's menu:</li>
</ul>
</li>
</ul>
<p><img alt="" src="/wiki/user/img/Mged1.png" /></p>
<ul>
<li>20 August 2013:<ul>
<li>Solved the issue regarding opening the display manager without a
    database: the problem was that after setting the background
    colour (in drawend) the UpdateRequest event is invoked, but it
    takes effect just if the window is exposed. Without processing
    other events the window wasn't exposed so the behaviour wasn't
    the expected one.</li>
<li>Continued searching a way to integrate the display manager in
    archer: I've managed to add a Modes&gt;Display Manager option
    but now I have to see how I can add the appropriate behaviour.</li>
</ul>
</li>
<li>21 August 2013:<ul>
<li>Studied more archer code: found some keypoints in libtclcad that
    I will focus on tomorrow.</li>
<li>Searched about how framebuffer windows are embedded in current
    dms.</li>
<li>Tested the Qt display manager in mged.</li>
</ul>
</li>
<li>22 August 2013:<ul>
<li>Got the first object drawn in archer. However after discussing
    with my mentor and testing on another platform I get a segfault.</li>
<li>Solved some sanity checks regarding calling drawVList before
    drawBegin or if some error occurs.</li>
</ul>
</li>
<li>23 August 2013:<ul>
<li>Tested a solution for the segfault from yesterday.</li>
<li>Found a solution to bound: invalid bounds. This occurred because
    Qt sets different locale so that comma is used for decimal
    separator.</li>
</ul>
</li>
<li>24 August 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>25 August 2013:<ul>
<li>Drawing in archer with segfault solved.</li>
<li>Tried to find a way to hook the Modes-&gt;Display Manager to
    actually selecting a new display manager. Haven't managed yet.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Even though I changed a little bit the weekly milestones I
    managed to get drawings displayed in archer. Still there are
    some things that need to be solved (event processing in archer)
    but at the moment the display manager can be used in both mged
    and archer.</li>
</ul>
</li>
</ul>
<h2 id="week-11-26-august-1-september">Week 11 (26 August - 1 September)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Finish the archer integration.</li>
<li>Start working at framebuffer window embedding.</li>
</ul>
</li>
<li>26 August 2013:<ul>
<li>Tried do solve the event problem that still occurs when using
    the dm in archer.</li>
</ul>
</li>
<li>27 August 2013:<ul>
<li>Continued struggling with linking the menu item with the actual
    code.</li>
</ul>
</li>
<li>28 August 2013:<ul>
<li>Searched for actual framebuffer window embedding and tried to
    find all relevant paths.</li>
</ul>
</li>
<li>29 August 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>30 August 2013:<ul>
<li>Continued the research in the both aspects: archer and
    framebuffer window.</li>
<li>Being one of the most unclear parts of the project, embedding a
    framebuffer window needs a lot of research.</li>
</ul>
</li>
<li>31 August 2013:<ul>
<li>Continued the quest to find useful code sections.</li>
</ul>
</li>
<li>1 September 2013:<ul>
<li>Made some testing in archer to see if objects are displayed
    well. Everything seems to work except the event processing which
    is only done when drawing.</li>
<li>Unfortunately I haven't found archers event processing code
    section.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>The archer integration is 90% done.</li>
<li>I have studied and tried to came up with a solution for
    framebuffer window embedding.</li>
</ul>
</li>
</ul>
<h2 id="week-12-2-september-8-september">Week 12 (2 September - 8 September)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Finish archer integration.</li>
<li>Testing and fixing other issues.</li>
</ul>
</li>
<li>2 September 2013:<ul>
<li>Fix one issue regarding object rotation. The event was generated
    without initial coordinates so that the object first jumped in a
    position the started to rotate correctly.</li>
<li>Modified the event processing so that new bindings can be easily
    added: just add a function that from the Qt event generates the
    corresponding Tk one.</li>
</ul>
</li>
<li>3 September 2013:<ul>
<li>Fixed a locale issue: even though it was set in mged.c there
    still were some problems so I've set the locale to POSIX in
    dm-qt.cpp. Now everything seems to work fine.</li>
<li>Tried to process events in archer. I've made some progress in
    order to process events correctly.</li>
</ul>
</li>
<li>4 September 2013:<ul>
<li>Break day</li>
</ul>
</li>
<li>5 September 2013:<ul>
<li>Researched a strange behavior while running archer: at startup
    there are no drawing functions called but when trying with a
    different dm the functions are called. Probably this is due to
    lack of event processing.</li>
</ul>
</li>
<li>6 September 2013:<ul>
<li>Tried to solve the issue reported yesterday. I hope by the end
    of this week the new display manager would be able to run in
    archer perfectly.</li>
</ul>
</li>
<li>7 September 2013:<ul>
<li>Almost finished the event processing for archer. Just some small
    changes are needed.</li>
</ul>
</li>
<li>8 September 2013:<ul>
<li>Finished the archer integration.</li>
<li>Studied existing frambuffer interface so that I can start
    implementing a Qt framebuffer.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Archer integration is done.</li>
</ul>
</li>
</ul>
<h2 id="week-13-9-september-15-september">Week 13 (9 September - 15 September)</h2>
<ul>
<li><strong>Weekly milestone</strong>:<ul>
<li>Testing</li>
</ul>
</li>
<li>9 September 2013:<ul>
<li>Did some testing and I found out that the selection tool in
    archer and the measure tool do not work correctly so I
    investigated the behavior: turns out the tk click events
    generated do not had mouse position infos.</li>
<li>There still is a problem with the measuring tool: after showing
    the distance and drawing the line, it draws multiple other lines</li>
</ul>
</li>
<li>10 September 2013:<ul>
<li>Fixed some memory leaks and did some testing.</li>
</ul>
</li>
<li>11 September 2013:<ul>
<li>Rewritten the event integration using Tcl_CreateEventSource so
    that QApplication::processEvents is called every time
    Tcl_DoOneEvent is called and no additional calls have to be
    made.</li>
</ul>
</li>
<li>12 September 2013:<ul>
<li>Simulated the non-blocking processing events using
    Tcl_DoWhenIdle and Tcl_CreateTimerHandler so that the actual
    archer/mged/bwish code shouldn't be modified at all.</li>
</ul>
</li>
<li>13 September 2013:<ul>
<li>Made some fixes and added comments.</li>
<li>Investigated the closing segfault but I haven't been able to
    solve it yet.</li>
</ul>
</li>
<li>14 September 2013:<ul>
<li>Mostly a break day but I've continued working to the segfault
    reported yesterday. Still no luck.</li>
</ul>
</li>
<li>15 September 2013:<ul>
<li>Added Qt to cmake report.</li>
<li>Made some cleanups since after the past days changing there were
    some things that were not needed anymore.</li>
<li>Added some comments.</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>The display manager is mostly done and working.</li>
</ul>
</li>
</ul>
<h2 id="week-14-16-september-22-september">Week 14 (16 September - 22 September)</h2>
<ul>
<li>Weekly milestone:<ul>
<li>More testing and other fixes.</li>
<li>Start implementing the Qt framebuffer.</li>
</ul>
</li>
<li>16 September 2013:<ul>
<li>Started working on the qt framebuffer interface.</li>
</ul>
</li>
<li>17 September 2013:<ul>
<li>Continued researching the closing segfault.</li>
<li>Researched the existing framebuffer interfaces and how are they
    integrated.</li>
</ul>
</li>
<li>18 September 2013:<ul>
<li>Tried to solve the segfault: gdb + searches in libx and qt code.</li>
</ul>
</li>
<li>19 September 2013:<ul>
<li>More attempts to solve the segfault.</li>
</ul>
</li>
<li>20 September 2013:<ul>
<li>Mostly a break day.</li>
</ul>
</li>
<li>21 September 2013:<ul>
<li>Added new events</li>
<li>Small fixes + comments</li>
<li>Started working on project summary.</li>
</ul>
</li>
<li>22 September 2013:<ul>
<li>Cleanups</li>
</ul>
</li>
<li><strong>Conclusion</strong>:<ul>
<li>Everything seems to work fine.</li>
</ul>
</li>
</ul>
<h2 id="week-15">Week 15</h2>
<ul>
<li>23 September 2013:<ul>
<li>Tried more approaches to solve the segfault.</li>
</ul>
</li>
<li>24 September 2013:<ul>
<li>Completed final evaluation.</li>
</ul>
</li>
</ul>
<h1 id="project-summary">Project summary</h1>
<p><a href="../qt-display-manager/">The project summary can be found here</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
