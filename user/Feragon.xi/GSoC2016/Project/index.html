<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://brl-cad.github.io/wiki/user/Feragon.xi/GSoC2016/Project/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Project - BRL-CAD Wiki</title>
        <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../..">BRL-CAD Wiki</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../../DocPages/" class="nav-link">DocPages</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../../UserPages/" class="nav-link">UserPages</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/BRL-CAD/wiki/blob/main/pages/user/Feragon.xi/GSoC2016/Project.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#librecad-3-scriptable-user-interface-creation" class="nav-link">LibreCAD 3 Scriptable User Interface Creation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h2 id="librecad-3-scriptable-user-interface-creation">LibreCAD 3 Scriptable User Interface Creation</h2>
<h3 id="brief-project-summary">Brief project summary</h3>
<p>LibreCAD 3 have a new code base. Currently the only way to create
objects is writing a Lua script, and there is no means to manipulate
entities after their creation.</p>
<p>This project aims at making the program usable for an end-user, who
should be able to create and edit documents without writing Lua code.</p>
<h3 id="detailed-project-description">Detailed project description</h3>
<p>LibreCAD 3 is currently divided into 3 parts:</p>
<ul>
<li>The user interface</li>
<li>The kernel</li>
<li>The CAD Viewer</li>
</ul>
<p>This project involves working with the LC user interface by creating a
framework and a GUI, and the LC kernel to add the selection of entities.</p>
<h4 id="kernel">Kernel</h4>
<p>Actually items selection is only available in the drawer¹, not in the
kernel. The kernel will need a modification to add the possibility to
select one or more elements and operate on them.</p>
<p>A new method will be added to the entities to get their definition
points, that will be displayed when hovering them. The user can modify
the document by moving these points.</p>
<h5 id="references">References</h5>
<ul>
<li><a href="https://github.com/LibreCAD/LibreCAD_3/blob/master/lcviewernoqt/drawitems/lcvdrawitem.cpp">https://github.com/LibreCAD/LibreCAD_3/blob/master/lcviewernoqt/drawitems/lcvdrawitem.cpp</a></li>
</ul>
<h4 id="framework">Framework</h4>
<p>The framework should allow to create and modify entities stored in the
kernel.</p>
<p>The constraint is to be independent of drawing engine and input method,
so others CAD programs could use the LCv3 engine and it can facilitate
the port to other platforms (mobile, tablet, ...), so it should not
depend on Qt or other GUI library. It must be extendable to evolve with
the code. The framework should be able to deal with all the methods used
to create and modify entities, for example a circle can be created by
giving two points or a point and the radius.</p>
<p>It will be called by the UI for each user action and will be composed of
an element for each entity available in the kernel.</p>
<p>The framework will be scriptable so we can modify the interface without
recompiling. Lua will be used for this part, the actual kernel bindings¹
should be sufficient for this part.</p>
<h5 id="reference">Reference</h5>
<ul>
<li><a href="https://github.com/LibreCAD/LibreCAD_3/blob/master/lcadluascript/cad/lualibrecadbridge.cpp">https://github.com/LibreCAD/LibreCAD_3/blob/master/lcadluascript/cad/lualibrecadbridge.cpp</a></li>
</ul>
<h4 id="gui">GUI</h4>
<p>The GUI should contain all the elements to create and manipulate
entities. The framework will be called when an operation is selected and
should allow the user to enter data manually in the console, or
automatically in the canvas by selecting points or entities.</p>
<p>It will be composed of Lua scripts for the same reason as the framework.
The current Lua interpreter contains Qt bindings¹ but it’s only the data
types.</p>
<p>New bindings will be created to manipulate Qt elements with Lua.</p>
<p>An API will be created to allow the framework to request data from the
user. The main window will contain the buttons for each actions and a
command prompt to enter Lua code, so instead of writing all the Lua
script, the user can select the elements on the window and just enter
one function.</p>
<h5 id="reference_1">Reference</h5>
<ul>
<li><a href="https://github.com/SteveKChiu/lua-intf/blob/d6f17a8a474814d337e1dd867238e1d5ba1b7e5c/LuaIntf/QtLuaIntf.h">https://github.com/SteveKChiu/lua-intf/blob/d6f17a8a474814d337e1dd867238e1d5ba1b7e5c/LuaIntf/QtLuaIntf.h</a></li>
</ul>
<h3 id="deliverable">Deliverable</h3>
<p>This project will add the following features to LibreCAD 3:</p>
<ul>
<li>Scriptable User Interface</li>
<li>Operations on entities exposed to the user<ul>
<li>Creation</li>
<li>Rotation</li>
<li>Move</li>
<li>Copy</li>
<li>Remove</li>
</ul>
</li>
<li>GUI elements to do the operations</li>
<li>Unit tests</li>
</ul>
<h3 id="why-librecad">Why LibreCAD ?</h3>
<p>I used some CAD programs before and LibreCAD is the only one compatible
with Linux which allows me to do what I need. And I think LibreCAD 3 has
advantages over some proprietary CAD software, it is faster to start.</p>
<h3 id="why-me">Why me ?</h3>
<p>I have a good experience with C++, Qt and Lua as required for this
project. As I already worked with CAD softwares, I understand the users
expectations from LibreCAD.</p>
<h3 id="time-availability">Time availability</h3>
<p>I can work at least 40 hours a week and more if needed.</p>
<p>I have a finals week during the week of the 23 May, I'll do some work on
the selection part during the community bonding period to not having too
much delay on the schedule.</p>
<h3 id="development-schedule">Development schedule</h3>
<ul>
<li>Community Bonding Period:<ul>
<li>Get to know about the community and the code</li>
<li>Adapt proposal with feedback and new ideas</li>
<li>Remove unused files of actual User Interface</li>
<li>Improve the Lua UI code sent for evaluation</li>
<li>Begin working on the selection instead of the week of 23 May</li>
</ul>
</li>
<li>23 May - 28 May:<ul>
<li>Finals week</li>
</ul>
</li>
<li>29 May – 31 May:<ul>
<li>Add selection of entities in the kernel</li>
</ul>
</li>
<li>1 June – 14 June:<ul>
<li>Add GUI elements</li>
<li>Add the API to use them</li>
</ul>
</li>
<li>15 June – 26 June:<ul>
<li>Implement creation for each entities</li>
</ul>
</li>
<li>27 June – 6 July:<ul>
<li>Implement rotation for each entities</li>
</ul>
</li>
<li>7 July – 17 July:<ul>
<li>Implement move for each entities</li>
</ul>
</li>
<li>18 July – 27 July:<ul>
<li>Implement copy for each entities</li>
</ul>
</li>
<li>28 July – 3 August:<ul>
<li>Implement remove for each entities</li>
</ul>
</li>
<li>4 August – 14 August:<ul>
<li>Creating unit tests</li>
</ul>
</li>
<li>15 August – 23 August:<ul>
<li>Code cleanup</li>
<li>Fixing bugs</li>
<li>Preparing final submission</li>
</ul>
</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
