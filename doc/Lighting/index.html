<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://brl-cad.github.io/wiki/doc/Lighting/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Lighting - BRL-CAD Wiki</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">BRL-CAD Wiki</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../DocPages/" class="nav-link">DocPages</a>
                            </li>
                            <li class="navitem">
                                <a href="../../UserPages/" class="nav-link">UserPages</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/BRL-CAD/wiki/blob/main/pages/doc/Lighting.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#a-simple-example" class="nav-link">A Simple Example</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#the-phong-plastic-shader" class="nav-link">The Phong "Plastic" Shader</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#tweaking-the-box" class="nav-link">Tweaking the Box</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#topping-it-all-off" class="nav-link">Topping it all off</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>BRL-CAD's <a href="rt.md">rt</a> ray tracer automatically provides light
sources if none are defined in a scene being rendered. Additionally, 30%
of the light in a scene goes towards ambient illumination so that all
objects in a scene are visible. The default lights are automatically
provided so that default renderings show users 'something' rather than
nothing.</p>
<p>That said, there are many situations that call for custom lighting where
you want to make an image brighter or darker or where you want to
illuminate a portion of the scene in some particular manner. To do this
in BRL-CAD, you create a combination object that has the 'light'
material property set.</p>
<p>If you render a scene with <strong>any</strong> lights, the default lights will be
disabled. The default ambient lighting will still remain at 30%, and is
a parameter controlled by the <strong>-A</strong> option to <a href="rt.md">rt</a>.</p>
<p>BRL-CAD supports a wide variety of light types including the ability to
represent directional lights, point light sources, colored lights, area
lights, and more. Lights are visible by default but may be marked
invisible for situations where you want to more heavily/specifically
illuminate a portion of a scene without seeing the light object itself.</p>
<h2 id="a-simple-example">A Simple Example</h2>
<p>Consider a simple scene comprised of a box with three colored lights
positioned above the box:</p>
<p><img alt="" src="/wiki/doc/img/Light1.png" /></p>
<p>The default ambient illumination allows the entire box to be visible
even though the light sources clearly do not illuminate the sides or
bottom of the box. By default, the 30% of the illumination in a scene
goes towards ambient lighting. If we set the ambient light contribution
to 0% (via <strong>rt -A0</strong>), only the top of the box is illuminated as we
would expect.</p>
<p><img alt="" src="/wiki/doc/img/Light2.png" /></p>
<p>To fully control the lighting for a given scene, ambient lighting should
be turned off (via <strong>rt -A0</strong>) or at least set to a low value (e.g.,
<strong>rt -A0.1</strong>). Without ambient lighting, more care must be taken to
illuminate a scene. Two common ways to do this are to either add more
lights around the scene or to increase the fraction of contribution on
the lights in the scene. For example, if we consider our simple scene
with ambient lighting disabled and increase the <em>fraction</em> parameter on
all three lights from 1.0 to 2.0, we double the intensity of the lights.</p>
<p><img alt="" src="/wiki/doc/img/Light3.png" /></p>
<p>Crank that fraction up to 10.0 and the lights reflected on the top of
the box really begin to bloom:</p>
<p><img alt="" src="/wiki/doc/img/Light4.png" /></p>
<p>Note that there is so much overlap between the lights at that point, so
you see blue for the farthest light, a pinkish magenta color in the
middle where blue and red are cross, and white where all three colors
are overlapping.</p>
<h2 id="the-phong-plastic-shader">The Phong "Plastic" Shader</h2>
<p>Now, at first thought, you may think that the lights are facing forward
but they are in face facing straight downward (with a 180 degree angle).
Or you may ask why the lights aren't evenly blending together with a
white bloom near the center and under the red light. The reason has to
do with the material properties (the shader) of the box itself. It's
using a default <em>plastic</em> shader. That shader controls how light
interacts with the box including how light is reflected, refracted,
absorbed, etc.</p>
<p>BRL-CAD's plastic shader is a basic "Phong" shader and provides
parameters that let you describe objects with a wide variety of
representative optical characteristics. With the right values to the
shader, you can give the appearance for a variety materials including
glass, metals, mirrors, and others in addition to a simple "plastic"
appearance that the default values provide.</p>
<p>Two parameters, specular and diffuse reflectivity, are particularly
important for plastic (a.k.a phong) objects as they control how much of
a light returns back towards the viewer. By default, 70% of light
hitting a phong surface will be <em>specular</em> and biased back towards a
viewer. The remaining 30% of the light is considered <em>diffuse</em> and
reflects less sharply towards the viewer.</p>
<p><img alt="" src="/wiki/doc/img/Phong.png" /></p>
<h2 id="tweaking-the-box">Tweaking the Box</h2>
<p>If we move the spherical light sources a little bit closer to the box's
surface, we can emphasize the effects of diffuse and specular
reflectivity:</p>
<p><img alt="" src="/wiki/doc/img/Light5.png" /></p>
<p>The default ratio of specular-to-diffuse is 7:3 or 70% going towards
specular and 30% towards diffuse reflectivity. If we balance the two
out, decreasing specular and increasing diffuse reflectivity, the
surface becomes slightly more 'dulled' and with our (high-powered, high
fraction) lights, we see even more overlap and blending of colors.</p>
<p><img alt="" src="/wiki/doc/img/Light6.png" /></p>
<p>Taking that to an extreme with only diffuse reflectivity, the light
hitting the surface becomes very spread out:</p>
<p><img alt="" src="/wiki/doc/img/Light7.png" /></p>
<p>Taking it to the opposite extreme with only specular reflectivity, each
light harshly reflects back off the surface and the "forward-blending"
of colors becomes rather apparent:</p>
<p><img alt="" src="/wiki/doc/img/Light8.png" /></p>
<h2 id="topping-it-all-off">Topping it all off</h2>
<p>In the simple example scene we are using, if we look at the scene from
directly above the three spheres, specular reflectance is no longer a
concern and we can see that the lights indeed do reflect straight down.
Here they are seen with a default 1.0 fraction and no ambient lighting:</p>
<p><img alt="" src="/wiki/doc/img/Light_brg.png" /></p>
<p>If we increase the light intensity contribution (i.e., its fraction) by
an order of magnitude to 10.0 then the colors begin to overlap
considerably:</p>
<p><img alt="" src="/wiki/doc/img/Light_brg10.png" /></p>
<p>Notice in particular the optical illusion of a bright halo around each
light caused by how the three lights are overlapping and how you can
begin to see a combined "white" underneath the red light where all three
are combining. The halo effect is where the light being reflected from
the surface reaches a maximum intensity (255) for that given component
and the contribution of the neighboring colors continues to increase
(which seems darker but is actually brighter).</p>
<p>If the fraction is increased even further still, the center white
becomes even more pronounced and the color overlap becomes considerable:</p>
<p><img alt="" src="/wiki/doc/img/Light_brg20.png" />
<a href="category:tutorials.md">category:tutorials</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
