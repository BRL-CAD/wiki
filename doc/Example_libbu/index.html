<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://brl-cad.github.io/wiki/doc/Example_libbu/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Example libbu - BRL-CAD Wiki</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">BRL-CAD Wiki</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../code/" class="nav-link">Code</a>
                            </li>
                            <li class="navitem">
                                <a href="../../tasks/" class="nav-link">Tasks</a>
                            </li>
                            <li class="navitem">
                                <a href="../../users/" class="nav-link">Users</a>
                            </li>
                            <li class="navitem">
                                <a href="../../docs/" class="nav-link">Docs</a>
                            </li>
                            <li class="navitem">
                                <a href="../../pdf/" class="nav-link">PDFs</a>
                            </li>
                            <li class="navitem">
                                <a href="../../misc/" class="nav-link">Misc</a>
                            </li>
                            <li class="navitem">
                                <a href="../../talks/" class="nav-link">Talks</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/BRL-CAD/wiki/blob/main/pages/doc/Example_libbu.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>Compiling against any of BRL-CAD's 20+ libraries is generally quite
straight forward. Say you have a simple C++ source file named <code>test.cpp</code>
using LIBBU, BRL-CAD's basic utility library:</p>
<p><code></p>
<pre><code>#include "bu.h"
#include &lt;iostream&gt;

int
main(int ac, char *av[]) {
    bu_setprogname(av[0]);
    std::cout &lt;&lt; "Program name is " &lt;&lt; bu_getprogname() &lt;&lt; std::endl;
    return 0;
}
</code></pre>
<p></code></p>
<p>Building software involves compiling source code, linking objects, and
running our application. No matter what compiler or operating system you
use, there are options for all three of those:</p>
<ul>
<li>To <em>compile</em>, you need to specify paths to headers (so the #include
    lines work).<ul>
<li>For gcc/clang, this is usually -I options.</li>
</ul>
</li>
<li>To <em>link</em>, you need to specify paths and libraries to link (so it
    can find functions).<ul>
<li>For gcc/clang, this is usually -L options and -l options.</li>
</ul>
</li>
<li>To <em>run</em>, you need to specify run paths to libraries (so it can use
    functions).<ul>
<li>For gcc/clang, this is usually an -rpath linker option.</li>
</ul>
</li>
</ul>
<p>So say we put that <code>test.cpp</code> file in \~/brlcad and have BRL-CAD
compiled at \~/brlcad/.build but not installed. (You don't need to
install to use any library -- you just need to know where to find
headers and libs!) After changing directory to \~/brlcad, we can
compile, link, and run our little test program:</p>
<p><code></p>
<pre><code>c++ -c -Iinclude -I.build/include test.cpp
c++ test.o -L.build/lib -Wl,-rpath -Wl,.build/lib -lbu
./a.out
</code></pre>
<p></code></p>
<p>Woot! If you didn't confuse l with 1, put the wrong path, or mix
something else up, you should see:</p>
<p><code></p>
<p><code>Program name is a.out</code></p>
<p></code></p>
<p>And that's essentially all there is to it! We can even simplify the
entire process into one compile+link command if we are careful enough to
make sure include flags come <em>before</em> source files and linker flags come
<em>after</em> the source files in the right order:</p>
<p><code></p>
<p><code>c++ -Iinclude -I.build/include</code><strong><code>test.cpp</code></strong><code>-L.build/lib -Wl,-rpath -Wl,.build/lib -lbu</code></p>
<p></code></p>
<p>From there, we set up to use any function in LIBBU. If we want to link
against another library like LIBRT or LIBGED, we already have the right
paths so we'd simply add -lrt or -lged respectively to the link line. To
find functions, we can browse around the headers and subdirs in the
include directory as nearly every public function is documented in
detail there with comments, often with code snippet examples too.</p>
<p>If we already installed BRL-CAD into /opt/brlcad and want to use all
headers and all the core libraries, the process remains the same.
Specify paths to headers, source file(s), paths to libs, and then the
libs need:</p>
<p><code></p>
<p><code>c++ -I/opt/brlcad/include -I/opt/brlcad/include/brlcad -I/opt/brlcad/include/openNURBS</code><strong><code>test.cpp</code></strong><code>-L/opt/brlcad/lib -Wl,-rpath -Wl,/opt/brlcad/lib -lged -lrt -lbn -lbu</code></p>
<p></code></p>
<p>Happy coding!</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
